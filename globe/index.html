<!DOCTYPE HTML>
<html lang="en">
  <head>
    <title>Globe</title>
    <meta charset="utf-8">
    <link href="/globe/third-party/mapbox-gl.css" rel="stylesheet" />
    <style type="text/css">
      body {
        margin: 0px;
        padding: 0px;
      }
      #map {
        height: 400px !important;
      }
    </style>
  </head>
  <body>

  <div id="container" height="300px"></div>
  <div id="map" height="300px" width="600px"></div>

  <script src="/globe/third-party/Detector.js"></script>
  <script src="/globe/third-party/three.min.js"></script>
  <script src="/globe/third-party/Tween.js"></script>
  <script src="/globe/third-party/MercatorPlane.js"></script>
  <script src="/globe/globe.js"></script>
  <script src="/globe/third-party/mapbox-gl.js"></script>
  <script type="text/javascript">

    async function main() {

      if(!Detector.webgl){
        Detector.addGetWebGLMessage();
      } else {

        // mapboxgl.accessToken = "pk.eyJ1IjoiYW1pdGx6a3BhIiwiYSI6ImNpZmN6ZW12ZzRvYTFzeG03ZDdkNzd5d2oifQ.FxgL_waU-ZRhhtQdeOvtcA";
        // var map = new mapboxgl.Map({
        //   container: "map",
        //   style: "mapbox://styles/mapbox/streets-v9",
        //   center: [-21.9270884, 64.1436456],
        //   zoom: 0,
        //   preserveDrawingBuffer: true,
        //   antialias: true,
        //   renderWorldCopies: false
        // });

        var container = document.getElementById("container");
        var globe = new DAT.Globe(container);
        globe.animate();

        let pos_mumbai = [19.076090, 72.877426];
        let pos_delhi = [28.644800, 77.216721];
        let pos_moscow = [55.751244, 37.618423];
        let pos_austin = [30.266666, -97.733330];
        let pos_manila = [14.6042004, 120.9822006];
        let pos_hongkong = [22.3964272, 114.1094971];
        let pos_cebu = [10.31672, 123.8907089];
        let pos_singapore = [1.290270, 103.851959];
        let pos_bangkok = [13.7539797, 100.501442];
        let pos_phnompenh = [11.5624504, 104.916008];
        let pos_saigon = [10.82302, 106.6296463];
        let pos_jakarta = [-6.2146201, 106.8451309];
        let pos_tonga = [-21.1789856, -175.1982422];
        let pos_portmoresby = [-9.44314, 147.179718];
        let pos_napydaw = [19.7450008, 96.1297226];
        let pos_portblair = [11.623377, 92.726486];
        let pos_chennai = [13.0878401, 80.2784729];
        let pos_vizag = [17.68009, 83.2016068];
        let pos_darwin = [-12.462827, 130.841782];

        globe.addMarker( pos_mumbai, {size: 4} );
        globe.addMarker( pos_delhi, {size: 2} );
        globe.addMarker( pos_moscow, {size: 2} );
        globe.addMarker( pos_austin );
        globe.addMarker( pos_manila );
        globe.addMarker( pos_hongkong, {size: 4} );
        globe.addMarker( pos_cebu, {size: 2} );
        globe.addMarker( pos_singapore, {size: 2} );
        globe.addMarker( pos_bangkok, {size: 2} );
        globe.addMarker( pos_phnompenh, {size: 2} );
        globe.addMarker( pos_saigon, {size: 4} );
        globe.addMarker( pos_jakarta, {size: 2} );
        globe.addMarker( pos_tonga, {size: 2} );
        globe.addMarker( pos_portmoresby, {size: 3} );
        globe.addMarker( pos_napydaw, {size: 3} );
        globe.addMarker( pos_portblair, {size: 2} );
        globe.addMarker( pos_chennai, {size: 2} );
        globe.addMarker( pos_vizag, {size: 3} );
        globe.addMarker( pos_darwin, {size: 4} );


        globe.addLine([pos_mumbai, pos_moscow], {color: 0x0000ff});
        globe.addLine([pos_mumbai, pos_vizag], {color: 0x0000ff});
        globe.addLine([pos_mumbai, pos_delhi], {color: 0xff0000});
        globe.addLine([pos_mumbai, pos_chennai], {color: 0xfff000});
        globe.addLine([pos_darwin, pos_cebu], {color: 0xff0000});
        globe.addLine([pos_napydaw, pos_vizag], {color: 0xff0000});
        globe.addLine([pos_chennai, pos_portblair], {color: 0xff0000});
        globe.addLine([pos_singapore, pos_bangkok], {color: 0xff0000});
        globe.addLine([pos_bangkok, pos_napydaw], {color: 0xff0000});
        globe.addLine([pos_tonga, pos_portmoresby], {color: 0xff0000});
        globe.addLine([pos_hongkong, pos_saigon], {color: 0xff0000});
        globe.addLine([pos_manila, pos_portmoresby], {color: 0xff0000});
        globe.addLine([pos_darwin, pos_jakarta], {color: 0xff0000});
        globe.addLine([pos_phnompenh, pos_bangkok], {color: 0xff0000});
        globe.addLine([pos_cebu, pos_jakarta], {color: 0xff0000});
        globe.addLine([pos_darwin, pos_saigon], {color: 0xff0000});
        globe.addLine([pos_cebu, pos_manila], {color: 0xff0000});

        // let json = await fetch('/data/world.geo.json');
        // let gj_world = await json.json();
        // globe.addGeoJson(gj_world);


        // document.addEventListener("keyup", function (event) {

        //   if(event.code !== "Space") return;

        //   event.preventDefault();

        //   var mapImg = map.getCanvas().toDataURL();
        //   var texture = new THREE.TextureLoader().load(mapImg);
        //   var material = new THREE.MeshBasicMaterial( { map: texture, opacity: 0.3 } );
        //   globe.mesh.material = material;
        //   console.log(material);

        //   let mp = new MercatorPlane(texture, 1000);
        //   console.log(mp);
        //   globe.scene.add(mp)


        // }, false);

      }

    }

    main();

  </script>

  </body>

</html>
